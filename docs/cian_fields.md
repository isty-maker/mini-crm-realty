# CIAN Field Matrix (v2) — без метро и ЖК

Этот документ фиксирует «матрицу» полей для выгрузки на ЦИАН, чтобы синхронизировать:
- что мы храним в `Property` / `Photo`;
- что показываем в форме редактирования;
- что выгружаем в `export_cian`.

## Как читать `docs/cian_fields.yaml`

- `common`: поля, которые применяются ко всем категориям/сделкам (или почти ко всем).
- `deal_terms`: поля внутри `BargainTerms` (цена, валюта, залог и т.д.).
- `category.<cat>.<op>`: поля для конкретной категории (`flat|room|house|commercial`)
  и типа сделки (`sale|rent`).
- `model_field`: имя поля в нашей модели (если уже существует). Если такого поля нет — его нужно добавить отдельным PR (модель + форма + шаблон).
- `status`:
  - `required` — обязательно заполнить (иначе объект не готов к выгрузке);
  - `recommended` — желательно заполнить (качество карточки);
  - `optional` — необязательно.

**Вне диапазона:** по требованию исключены поля метро (Undergrounds) и ЖК (JKSchema).

## Как применять
1. Форма редактирования: показывать секции/поля по `category` и `operation`.
2. Предэкспортная проверка: перед генерацией XML проверять `required` поля для каждого объекта.
3. Экспорт: маппить значения из `model_field` в соответствующие XML-теги (см. `export_cian`).

## Примечания
- Форматы и допустимые значения некоторых полей могут уточняться по официальной документации ЦИАН. При расхождениях исходной точкой является этот YAML, затем — обновление по мере необходимости.
- Валюты: используем коды ЦИАН (`rur|usd|eur`).
- Если в проекте нет какой-то категории (например, `commercial`) — соответствующие блоки можно игнорировать.
